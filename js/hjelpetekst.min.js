!function(a){"use strict";a.hjelpetekst={version:"0.2",isInitialized:!1,init:function(b,c,d){if(!a.hjelpetekst.isInitialized){var e=(new Date).getTime(),f=0;b="undefined"!=typeof b?b:a("#pFlowId").val()||"",c="undefined"!=typeof c?c:a("#pFlowStepId").val()||"",d="undefined"!=typeof d?d:"www.kursadmin.org"===location.hostname?"https://storage.googleapis.com/hjelpetekst.appspot.com/h1":"https://hjelpetekst.appspot.com/json-dev";var g=function(b,c,d){c.length||(c=a('<div id="ht_p1000_cont" class="ui-tabs-panel ui-widget-content ui-corner-all" style="margin: 0 3px 10px; max-width: 605px; font-size: 125%; line-height: 1.4"><div style="margin: 2ex"></div></div>'),b.prepend(c)),d.length||(d=a('<div id="ht_p1000_tabs" class="sHTabs" style="margin: 0 3px;"><div class="sHTabsInner"><ul></ul></div></div>'),b.prepend(d))},h=function(b,c,d){c.on("click",function(){var c=this.parentNode;a("#ht_p1000_cont").find(":first-child").html(b.tekst),a("#ht_p1000_tabs").find("li").removeClass().addClass(function(){return(a(this).is(":first-child")?"first-":a(this).is(":last-child")?"last-":"")+(c===this?"":"non-")+"current"})}),d.append(c),"$$__FAQ__$$"===b.selector?(c.attr("href","#faq").attr("id","ht_p1000_cont_faq").html("<span>Ofte stilte sp\xf8rsm\xe5l</span>"),a("#ht_p1000_tabs").find("ul").append(d)):"$$__HJEM__$$"===b.selector&&(c.attr("href","#hjem").attr("id","ht_p1000_cont_hjem").html("<span>Velkommen</span>"),a("#ht_p1000_tabs").find("ul").prepend(d))},i=function(b,c,d){b.attr("title",c.tittel+" (Klikk for hjelp)"),b.on("click",function(){a.hjelpetekst.show(c.tittel,c.tekst,encodeURI(c.video),encodeURI(c.link))}),b.insertAfter(d)};a.getJSON(d+"/"+b+"-"+c+".json",function(b){if(function(b,c){a("head").append(b),c.on("click",function(b){a(b.target).is(".hjelpetekst-dialog-outer")&&a.hjelpetekst.hide()}),a("body").append(c),c.hide()}(a("<style>a.hjelpetekst,div.sHTabs ul li a.hjelpetekst{font-size:16px;font-family:sans-serif;vertical-align:middle;font-weight:700;text-align:center;line-height:1.2;display:inline-block;width:2ex;height:2ex;border-radius:1ex;color:#000;background:#FCE300;border:1px solid #000;text-decoration:none;transition-duration:.5s;-moz-border-radius:1ex;-webkit-border-radius:1ex;-webkit-transition-duration:.5s;cursor:pointer;margin:-1ex .5ex;float:none;padding:0;}div.sHTabs ul li a.hjelpetekst{margin: 5px 5px 5px 0;}a.hjelpetekst:hover{background:orange;color:#000;text-decoration:none;}#hjelpetekst_dialog{font-family:sans-serif;font-size:15px;line-height:21px;color:#000;height:100%;left:0;position:fixed;top:0;width:100%;z-index:1000;background:rgba(0,0,0,0.4);display:table;}#hjelpetekst_dialog > div{display:table-cell;vertical-align:middle;}#hjelpetekst_dialog > div > div{box-sizing:content-box;background-color:#FCE300;border:3px solid #000;display:block;font-size:15px;line-height:1.4;margin:auto;padding:15px;width:280px;z-index:10001;}#hjelpetekst_dialog h3{font-family:sans-serif;font-size:18px;line-height:25px;border-bottom:1px solid #000;margin:0;padding-bottom:6px;font-weight:700;}#hjelpetekst_dialog h3 button{float:right;margin-left:4px;font-size:20px;}#hjelpetekst_dialog a,#hjelpetekst_dialog button{box-sizing:content-box;background:#fff;border:1px solid #000;color:#000;font-size:15px;line-height:21px;display:inline-block;font-weight:700;margin:-2px 0;padding:2px 10px;text-align:center;text-decoration:none;}#hjelpetekst_dialog p,#hjelpetekst_dialog iframe{box-sizing:content-box;border-bottom:1px solid #000;height:210px;margin:10px 0 15px;padding-bottom:10px;} #ht_p1000_cont h1, #ht_p1000_cont h2, #ht_p1000_cont h3, #ht_p1000_cont h4, #ht_p1000_cont h5, #ht_p1000_cont h6 { margin: 20px 0 6px;} #ht_p1000_cont p { margin: 0 0 16px; } #ht_p1000_cont img { max-width: 100%;vertical-align:middle; }</style>"),a('<div id="hjelpetekst_dialog"></div>')),"hjelp"in b){for(var d=0;d<b.hjelp.length;d++){var j=b.hjelp[d];if("1000"==c&&/^\$\$__(.+)__\$\$$/.test(j.selector))g(a("#body"),a("#ht_p1000_cont"),a("#ht_p1000_tabs")),h(j,a("<a />"),a('<li class="non-current" />'));else{j.selector=/^([^#\. ]*)$/.test(j.selector)?"#"+j.selector:j.selector;var k=a(j.selector);k.length?(f++,i(a('<a class="hjelpetekst" href="javascript:void(0)">?</a>'),j,k)):console.log("Elementet '"+j.selector+"' finnes ikke i denne visningen, og b\xf8r fjernes fra dokumentet.")}}"1000"==c&&a("#ht_p1000_tabs").find("li").filter(":last-child").removeClass().addClass("last-non-current").end().filter(":first-child").removeClass().addClass("first-non-current").end().find(a("#ht_p1000_cont_"+location.hash.substr(1)).length?"#ht_p1000_cont_"+location.hash.substr(1):":first-child").first().trigger("click"),console.log("Hjelpetekst.js har lagt inn "+f+" hjelpetekster i denne visningen. Prosessen tok "+((new Date).getTime()-e)+" ms.")}}),a(document).on("keydown.hjelpetekst",function(b){27==b.keyCode&&a.hjelpetekst.hide()}),a.hjelpetekst.isInitialized=!0}},hide:function(){a("#hjelpetekst_dialog").empty().hide()},show:function(b,c,d,e){var f=a('<div class="hjelpetekst-dialog-outer"><div class="hjelpetekst-dialog-content"><h3></h3><p></p></div></div>'),g=a('<button title="Lukk">&times;</button>');g.on("click",function(){a.hjelpetekst.hide()}),f.find("h3").text(b).prepend(g),f.find("p").text(c),d&&function(b){b.attr("href",d),b.on("click",function(b){b.preventDefault(),a.hjelpetekst.video(this.href)}),a(".hjelpetekst-dialog-content",f).append(b)}(a('<a style="width:110px;">Video</a>')),e&&function(b){b.attr("href",e),b.on("click",function(){a.hjelpetekst.hide()}),a(".hjelpetekst-dialog-content",f).append(b)}(a('<a style="width:110px; float:right;" target="_blank">Les mer</a>')),a(".hjelpetekst-dialog-content",f).append(a('<div style="clear:both;"></div>')),a("#hjelpetekst_dialog").show().empty().append(f)},video:function(b){var c=a("#hjelpetekst_dialog").find("p"),d=a("#hjelpetekst_dialog").find("iframe");d.length?(d.remove(),c.show()):(c.hide(),d=a('<iframe height="210" width="280" frameborder="0" allowfullscreen />'),d.attr("src",b+"?rel=0&autoplay=1"),d.insertBefore(c))}}}(window.jQuery),window.jQuery(window.jQuery.hjelpetekst.init(window.hjelpetekstStf,window.hjelpetekstVis,window.hjelpetekstUrl));